# Serbian Parliament Data Collection

This directory contains scripts for scraping parliamentary session data from the Serbian Parliament, including both video recordings and transcripts.

## Overview

The Serbian Parliament organizes its sessions by convocation periods (years). Each convocation contains multiple parliamentary sessions. The data is collected from two separate sources:
1. Video archive (hosted on videonet.co.rs)
2. Transcript website (otvoreniparlament.rs)

## Data Sources

- Video - transcript relation is unknown (maybe 1:1). To be sure, we assume **n:m**

### Video Archive
- Videos are stored as MP4 files on videonet.co.rs
- Each convocation period has a specific archive URL
- Covers convocations: 2012, 2014, 2016, 2020, 2024 (2022 missing)
- Archive URLs are dynamically generated by the official website
- Stored in `CONVOCATIONS` dictionary with year-URL mappings

### Transcript Website
- Hosted on otvoreniparlament.rs (Cloudflare protected)
- Covers all convocations including 2022
- Sessions are paginated (stored in `PAGES` dictionary)
- More comprehensive coverage than video archive
- Requires Botasaurus for Cloudflare bypass

## Scripts

### 1. getting_video_links.py
- Scrapes video links from the archive
- Extracts: video links, session titles
- Generates unique video_id: `serbia_[convocation]_[index]_[date]`
- Outputs: serbia_video_links.csv

### 2. getting_transcript_links.py
- Scrapes transcript links and metadata
- Handles pagination for each convocation
- Uses Botasaurus and BeautifulSoup for parsing
- Includes logging for anomalous page counts
- Generates unique transcript_id: `serbia_[convocation]_[index]_[date]`
- Outputs: serbia_transcript_links.csv

### 3. merge_csv.py
- Merges video and transcript data
- Performs inner join on dates
- Creates cartesian product for same-date entries
- Generates unique merged_id: `[transcript_id]_[video_id]`
- Outputs: serbia_urls.csv

## Data Format

### Dates
- All dates are stored in DDMMYYYY format
- Used in IDs and for matching videos with transcripts

### IDs
- video_id: `serbia_[convocation]_[index]_[date]`
- transcript_id: `serbia_[convocation]_[index]_[date]`
- merged_id: `[transcript_id]_[video_id]`

## Known Issues

### Missing Data
- Convocation 2022 missing from video archive
- 194 transcripts have no matching videos
- 3 videos have no matching transcripts

### Scraping Anomalies
- Some pages return 0 rows despite having content
  - Convocation 2014, page 1
  - Convocation 2016, page 8
- Expected row count per page: 23
- Anomalies logged in abnormal_row_counts.json

## Technical Details

### Dependencies
- Botasaurus (for Cloudflare bypass)
- BeautifulSoup (HTML parsing)
- pandas (data merging)
- tqdm (progress tracking)

### Protection Measures
- Random delays between requests
- Cloudflare bypass using Botasaurus
- Retry mechanism for failed requests

## Output Files
1. serbia_video_links.csv
2. serbia_transcript_links.csv
3. serbia_urls.csv (merged data)
4. abnormal_row_counts.json (logging)
